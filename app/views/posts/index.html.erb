<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
  <% @posts.each do |post| %>
    <div class="relative shadow-lg rounded-xl overflow-hidden cursor-pointer" onclick="location.href='<%= post_path(post) %>'">
      <div id="menu-<%= post.id %>" class="absolute top-4 right-16 space-x-2 z-20 hidden">
        <% if user_signed_in? && post.user == current_user %>
          <%= link_to 'Edit', edit_post_path(post), class: "bg-blue-500 text-white px-2 py-1 rounded", onclick: "event.stopPropagation();" %>
          <%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' }, class: "bg-red-500 text-white px-2 py-1 rounded", onclick: "event.stopPropagation();" %>
        <% end %>
      </div>
      <button class="absolute top-3 right-4 space-x-2 z-20" onclick="toggleMenu(<%= post.id %>)">
        <svg class="w-8 h-8 text-gray-800" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
          <path stroke="currentColor" stroke-linecap="round" stroke-width="4" d="M6 12h.01m6 0h.01m5.99 0h.01"/>
        </svg>
      </button>
      <% if post.image.attached? %>
        <div class="relative pb-[56.25%]"> <!-- 16:9 Aspect Ratio -->
          <%= image_tag post.image, class: "absolute inset-0 w-full h-full object-cover rounded-t-xl" %>
        </div>
      <% else %>
        <div class="relative pb-[56.25%] bg-gray-100 rounded-t-xl"></div>
      <% end %>
      <div class="p-6 relative z-20">
        <h1 class="text-xl font-bold mb-2"><%= post.content %></h1>
        <p class="text-sm text-gray-600"><%= post.user.email %></p>
      </div>
    </div>
  <% end %>
</div>

<script>
  function toggleMenu(postId) {
    event.stopPropagation();
    const menu = document.getElementById(`menu-${postId}`);
    menu.classList.toggle('hidden');
  }
</script>